(function(){"use strict";var e={5892:function(e,t,o){var a=o(5130),l=o(6768);function u(e,t){const o=(0,l.g2)("RouterView");return(0,l.uX)(),(0,l.Wv)(o)}var n=o(1241);const s={},i=(0,n.A)(s,[["render",u]]);var p=i,r=o(1387),c=(o(8992),o(4520),o(4232)),v=o(144),d=o.p+"img/logo.c63f0632.svg",_=o.p+"img/search.fd6e1f73.svg",k=o.p+"img/close.8cacd380.svg",m=o.p+"img/add.0ec9bfeb.svg",f=(o(4114),o(2577),o(782));const b=[{id:1,title:"Как разговаривать с кем угодно, когда угодно, где угодно",author:"Ларри Кинг",year:"2011",genre:"Научпоп"},{id:2,title:"Больше, чем просто красивая. 12 тайных сил женщины, перед которой невозможно устоять",author:"Кара Кинг",year:"2020",genre:"Научпоп"},{id:3,title:"Чистый код: создание, анализ и рефакторинг",author:"Роберт Мартин",year:"2008",genre:""}];function h(){const e=localStorage.getItem("book");return e?JSON.parse(e):b}var g=(0,f.y$)({state(){return{isAddPopupOpen:!1,isEditPopupOpen:!1,isConfirmPopupOpen:!1,selectedBook:null,books:h()}},mutations:{openAddPopup(e){e.isAddPopupOpen=!0},closeAddPopup(e){e.isAddPopupOpen=!1},openEditPopup(e,t){e.selectedBook=e.books.find((e=>e.id===t)),e.isEditPopupOpen=!0},closeEditPopup(e){e.isEditPopupOpen=!1},openConfirmPopup(e){e.isConfirmPopupOpen=!0},closeConfirmPopup(e){e.isConfirmPopupOpen=!1},addBook(e,t){e.books.push(t),e.isAddPopupOpen=!1,L(e.books)},updateBook(e,t){const o=e.books.findIndex((e=>e.id===t.id));-1!==o&&e.books.splice(o,1,t),e.isEditPopupOpen=!1,L(e.books)},removeBook(e,t){const o=e.books.findIndex((e=>e.id===t.id));-1!==o&&e.books.splice(o,1),e.isEditPopupOpen=!1,e.isConfirmPopupOpen=!1,L(e.books)}}});function L(e){localStorage.setItem("book",JSON.stringify(e))}var y=o.p+"img/edit.cba72daa.svg";const C={class:"item__header"},P={class:"header__title"},E=["onClick"],O={class:"item__info"},x={class:"info__element"},R={class:"info__element"},X={class:"info__element"};var w={__name:"BookItem",props:{searchItems:{type:Array,required:!0}},setup(e){function t(e){g.commit("openEditPopup",e)}const o=e;return(e,a)=>((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.searchItems,(e=>((0,l.uX)(),(0,l.CE)("div",{class:"book-item",key:e.id},[(0,l.Lk)("div",C,[(0,l.Lk)("h1",P,(0,c.v_)(e.title),1),(0,l.Lk)("button",{class:"header__edit",onClick:o=>t(e.id)},a[0]||(a[0]=[(0,l.Lk)("img",{src:y},null,-1)]),8,E)]),(0,l.Lk)("div",O,[(0,l.Lk)("p",x,(0,c.v_)(e.author),1),(0,l.Lk)("p",R,(0,c.v_)(e.year),1),(0,l.Lk)("p",X,(0,c.v_)(e.genre),1)])])))),128))}};const A=(0,n.A)(w,[["__scopeId","data-v-733b663a"]]);var B=A,I=o.p+"img/trash.a70e1c36.svg";const W={class:"confirm-popup-wrapper"};var K={__name:"ConfirmPopup",setup(e){function t(){g.commit("closeConfirmPopup")}function o(){g.commit("removeBook",g.state.selectedBook)}return(e,a)=>((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("div",{class:"popup__overlay",onClick:t}),(0,l.Lk)("div",{class:"confirm-popup"},[(0,l.Lk)("button",{class:"confirm__popup-button",onClick:o},"Да"),(0,l.Lk)("button",{class:"confirm__popup-button",onClick:t},"Нет")])]))}};const J=(0,n.A)(K,[["__scopeId","data-v-28362147"]]);var Q=J;function V(e){const t=e.target;let o=t.value;o=o.replace(/\D/g,""),o.length>4&&(o=o.slice(0,4));const a=(new Date).getFullYear();if(4===o.length){const e=parseInt(o,10);e>a&&(o=a.toString())}t.value=o}const j={class:"book-popup-wrapper"},U={class:"book-popup"},F={class:"popup__header-wrapper"},S={class:"popup__header"},D={class:"header__title"},M={class:"header__subtitle"},N={class:"popup__item"},T={key:0,class:"error__text"},$={class:"popup__item"},q={key:0,class:"error__text"},H={class:"popup__item"},Y={key:0,class:"error__text"},z={class:"popup__item"},G={key:0,class:"error__text"},Z={class:"popup__checkbox-item"},ee={for:"checkbox",class:"checkbox__title"},te={key:1,class:"popup__buttons-wrapper"};var oe={__name:"BookPopup",setup(e){function t(){g.commit("closeAddPopup")}function o(){g.commit("closeEditPopup")}function u(){g.commit("openConfirmPopup")}const n=(0,v.KR)(""),s=(0,v.KR)(""),i=(0,v.KR)(""),p=(0,v.KR)(""),r=(0,v.KR)(!1),d=(0,v.KR)(!1),_=(0,v.KR)({title:"",author:"",year:"",genre:"",checkbox:""});function f(){r.value=!0,_.value={title:"",author:"",year:"",genre:""};let e=!0;if(n.value||(_.value.title="Введите название книги",e=!1),s.value||(_.value.author="Введите автора книги",e=!1),i.value||(_.value.year="Введите год выпуска книги",e=!1),p.value||(_.value.genre="Введите жанр книги",e=!1),d.value||(_.value.checkbox=!0,e=!1),!e)return;const t={id:g.state.books.length+1,title:n.value,author:s.value,year:i.value,genre:p.value};g.commit("addBook",t),n.value="",s.value="",i.value="",p.value="",r.value=!1,d.value=!1}function b(){r.value=!0,_.value={title:"",author:"",year:"",genre:""};let e=!0;if(n.value||(_.value.title="Введите название книги",e=!1),s.value||(_.value.author="Введите автора книги",e=!1),i.value||(_.value.year="Введите год выпуска книги",e=!1),p.value||(_.value.genre="Введите жанр книги",e=!1),d.value||(_.value.checkbox=!0,e=!1),e&&g.state.selectedBook){const e={id:g.state.selectedBook.id,title:n.value,author:s.value,year:i.value,genre:p.value};g.commit("updateBook",e)}}function h(e){V(e),i.value=e.target.value}return(0,l.wB)((()=>g.state.selectedBook),(e=>{g.state.isEditPopupOpen&&e&&(n.value=e.title,s.value=e.author,i.value=e.year,p.value=e.genre)}),{immediate:!0}),(e,L)=>{const y=(0,l.g2)("RouterLink");return(0,l.uX)(),(0,l.CE)("div",j,[(0,v.R1)(g).state.isAddPopupOpen?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"popup__overlay",onClick:t})):((0,l.uX)(),(0,l.CE)("div",{key:1,class:"popup__overlay",onClick:o})),(0,l.Lk)("div",U,[(0,l.Lk)("div",F,[(0,l.Lk)("div",S,[(0,l.Lk)("h1",D,(0,c.v_)((0,v.R1)(g).state.isAddPopupOpen?"Добавить книгу":"Редактирование"),1),(0,l.Lk)("p",M,(0,c.v_)((0,v.R1)(g).state.isAddPopupOpen?"Заполните все поля и добавьте книгу в список":"Внесите изменение в карточке"),1)]),(0,v.R1)(g).state.isAddPopupOpen?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"header__close-popup",onClick:t},L[5]||(L[5]=[(0,l.Lk)("img",{src:k},null,-1)]))):((0,l.uX)(),(0,l.CE)("button",{key:1,class:"header__close-popup",onClick:o},L[6]||(L[6]=[(0,l.Lk)("img",{src:k},null,-1)])))]),(0,l.Lk)("div",N,[L[7]||(L[7]=(0,l.Lk)("label",{class:"item__title"},"Название",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:(0,c.C4)(["item__input",{"error__item-input":r.value&&_.value.title}]),placeholder:"Название произведения","onUpdate:modelValue":L[0]||(L[0]=e=>n.value=e)},null,2),[[a.Jo,n.value]]),r.value&&_.value.title?((0,l.uX)(),(0,l.CE)("p",T,(0,c.v_)(_.value.title),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",$,[L[8]||(L[8]=(0,l.Lk)("label",{class:"item__title"},"Автор",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:(0,c.C4)(["item__input",{"error__item-input":r.value&&_.value.author}]),placeholder:"Имя и фамилия автора","onUpdate:modelValue":L[1]||(L[1]=e=>s.value=e)},null,2),[[a.Jo,s.value]]),r.value&&_.value.author?((0,l.uX)(),(0,l.CE)("p",q,(0,c.v_)(_.value.author),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",H,[L[9]||(L[9]=(0,l.Lk)("label",{class:"item__title"},"Год",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number",class:(0,c.C4)(["item__input",{"error__item-input":r.value&&_.value.year}]),placeholder:"Год выпуска","onUpdate:modelValue":L[2]||(L[2]=e=>i.value=e),onInput:h},null,34),[[a.Jo,i.value]]),r.value&&_.value.year?((0,l.uX)(),(0,l.CE)("p",Y,(0,c.v_)(_.value.year),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",z,[L[10]||(L[10]=(0,l.Lk)("label",{class:"item__title"},"Жанр",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:(0,c.C4)(["item__input",{"error__item-input":r.value&&_.value.genre}]),placeholder:"Добавьте жанр произведения","onUpdate:modelValue":L[3]||(L[3]=e=>p.value=e)},null,2),[[a.Jo,p.value]]),r.value&&_.value.genre?((0,l.uX)(),(0,l.CE)("p",G,(0,c.v_)(_.value.genre),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Z,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox",id:"checkbox",class:(0,c.C4)(["checkbox",{error__checkbox:r.value&&_.value.checkbox}]),"onUpdate:modelValue":L[4]||(L[4]=e=>d.value=e)},null,2),[[a.lH,d.value]]),(0,l.Lk)("label",ee,[L[12]||(L[12]=(0,l.eW)("Я согласен с условиями ")),(0,l.bF)(y,{to:"#"},{default:(0,l.k6)((()=>L[11]||(L[11]=[(0,l.eW)("Политики конфиденциальности")]))),_:1})])]),(0,v.R1)(g).state.isAddPopupOpen?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"popup__done",onClick:f},L[13]||(L[13]=[(0,l.Lk)("img",{src:m},null,-1),(0,l.eW)(" Добавить ")]))):((0,l.uX)(),(0,l.CE)("div",te,[(0,l.Lk)("button",{class:"popup__done",onClick:b},L[14]||(L[14]=[(0,l.Lk)("img",{src:m},null,-1),(0,l.eW)(" Сохранить ")])),(0,l.Lk)("button",{class:"popup__delete",onClick:u},L[15]||(L[15]=[(0,l.Lk)("img",{src:I},null,-1)]))]))]),(0,v.R1)(g).state.isConfirmPopupOpen?((0,l.uX)(),(0,l.Wv)(Q,{key:2})):(0,l.Q3)("",!0)])}}};const ae=(0,n.A)(oe,[["__scopeId","data-v-46abed4d"]]);var le=ae;function ue(e,t){const o=[2,0,1,1,1,2],a={"книга":["книга","книги","книг"]},l=e%100>4&&e%100<20?2:o[Math.min(e%10,5)];return`${a[t][l]}`}const ne={class:"books-list-wrapper"},se={class:"books-list"},ie={class:"list__header-wrapper"},pe={class:"header__search-wrapper"},re={class:"search__item-wrapper"},ce={key:0,src:_,class:"item__icon"},ve={class:"header__info-wrapper"},de={key:0,class:"info__title"},_e={class:"info__count"},ke={key:1,class:"info__title"},me={class:"title__subtext"},fe={class:"list__place"},be={key:0,class:"place__no-results"};var he={__name:"BooksList",setup(e){function t(){g.commit("openAddPopup")}const o=(0,v.KR)(""),u=(0,l.EW)((()=>g.state.books.filter((e=>e.title.toLowerCase().includes(o.value.toLowerCase())))));function n(){o.value=""}return(e,s)=>((0,l.uX)(),(0,l.CE)("div",ne,[(0,l.Lk)("div",se,[(0,l.Lk)("div",ie,[(0,l.Lk)("div",pe,[s[2]||(s[2]=(0,l.Lk)("img",{src:d,class:"search__logo"},null,-1)),(0,l.Lk)("div",re,[""===o.value?((0,l.uX)(),(0,l.CE)("img",ce)):((0,l.uX)(),(0,l.CE)("button",{key:1,class:"item__clean-button",onClick:n},s[1]||(s[1]=[(0,l.Lk)("img",{src:k},null,-1)]))),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"Найти ту самую книгу",class:"search__item","onUpdate:modelValue":s[0]||(s[0]=e=>o.value=e)},null,512),[[a.Jo,o.value]])])]),(0,l.Lk)("div",ve,[""===o.value?((0,l.uX)(),(0,l.CE)("h1",de,[(0,l.eW)((0,c.v_)((0,v.R1)(ue)((0,v.R1)(g).state.books.length,"книга"))+" в каталоге ",1),(0,l.Lk)("span",_e,(0,c.v_)((0,v.R1)(g).state.books.length),1)])):((0,l.uX)(),(0,l.CE)("h1",ke,[s[3]||(s[3]=(0,l.eW)("Книги по запросу ")),(0,l.Lk)("span",me,"«"+(0,c.v_)(o.value)+"»",1)])),(0,l.Lk)("button",{class:"info__add-book",onClick:t},s[4]||(s[4]=[(0,l.Lk)("img",{src:m},null,-1),(0,l.eW)(" Добавить книгу ")]))])])]),(0,l.Lk)("div",fe,[0===u.value.length&&""!==o.value?((0,l.uX)(),(0,l.CE)("p",be,"По вашему запросу ничего не найдено.")):(0,l.Q3)("",!0),(0,l.bF)((0,v.R1)(B),{searchItems:u.value},null,8,["searchItems"])]),(0,v.R1)(g).state.isAddPopupOpen||(0,v.R1)(g).state.isEditPopupOpen?((0,l.uX)(),(0,l.Wv)((0,v.R1)(le),{key:0})):(0,l.Q3)("",!0)]))}};const ge=(0,n.A)(he,[["__scopeId","data-v-7b52fee8"]]);var Le=ge;const ye=[{path:"/",component:Le}];var Ce=(0,r.aE)({history:(0,r.Bt)(),routes:ye}),Pe=o(3178),Ee=o.n(Pe);(0,a.Ef)(p).use(Ce).use(Ee()).mount("#app")}},t={};function o(a){var l=t[a];if(void 0!==l)return l.exports;var u=t[a]={exports:{}};return e[a].call(u.exports,u,u.exports,o),u.exports}o.m=e,function(){var e=[];o.O=function(t,a,l,u){if(!a){var n=1/0;for(r=0;r<e.length;r++){a=e[r][0],l=e[r][1],u=e[r][2];for(var s=!0,i=0;i<a.length;i++)(!1&u||n>=u)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(s=!1,u<n&&(n=u));if(s){e.splice(r--,1);var p=l();void 0!==p&&(t=p)}}return t}u=u||0;for(var r=e.length;r>0&&e[r-1][2]>u;r--)e[r]=e[r-1];e[r]=[a,l,u]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/books-list/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,u,n=a[0],s=a[1],i=a[2],p=0;if(n.some((function(t){return 0!==e[t]}))){for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(i)var r=i(o)}for(t&&t(a);p<n.length;p++)u=n[p],o.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return o.O(r)},a=self["webpackChunkbooks_list"]=self["webpackChunkbooks_list"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(5892)}));a=o.O(a)})();
//# sourceMappingURL=app.d01fef16.js.map